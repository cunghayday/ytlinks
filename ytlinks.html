<!DOCTYPE html>
<html>
<head>
  <title>Extract Youtube Links</title>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
</head>
<html>
<body>


<p><textarea id="input" rows="4" cols="50" style="max-width: 96%;"></textarea></p>
<button onclick="doit()">Extract URL</button>&nbsp;
<button onclick="copy()">Copy list</button>&nbsp;
<button onclick="clearit()">Clear list</button>
<p><textarea id="output" rows="8" cols="50" style="max-width: 96%;"></textarea></p>
<p id="nlinks"></p>
<br><br>
<p style="text-align:center;">
<a href="https://github.com/cunghayday/ytlinks">Youtube Link Extractor</a>
</p><br><br>


<script>

let nlinks = 0;
function copy() {
	  var copyText = document.getElementById("output");
	  copyText.select();
	  copyText.setSelectionRange(0, 99999)
	  document.execCommand("copy");
	  navigator.clipboard.writeText(copyText.value);
	}
function clearit() {	
document.getElementById("input").value = '';
document.getElementById("output").value = '';
document.getElementById("nlinks").innerHTML = '';
}
function removeDuplicates(arr) { 
    return arr.filter((item, 
        index) => arr.indexOf(item) === index); 
} 
function doit() {
let text = document.getElementById("input").value;
let result1 = text.match(/watch\?v=[a-zA-Z0-9\-_]+/g);
var result2 = removeDuplicates(result1);
var result3 = result2.map(function(ytlink) { 
  return 'https://www.youtube.com/' + ytlink; 
})
nlinks =  result3.length;
let output = result3.join('\n');
document.getElementById("output").value = output;
document.getElementById("nlinks").innerHTML = '<span style="font-weight:bold;">' + nlinks + '</span> links was extracted.';
}
 
</script>

</body>
</html>
